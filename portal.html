<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --primary: #0c0e1b;
            --secondary: #1a1d36;
            --accent: #6a4ce0;
            --accent2: #ff4d94;
            --accent3: #00e0ff;
            --text: #e0e0ff;
            --text-secondary: #a0a0c0;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(106, 76, 224, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(255, 77, 148, 0.1) 0%, transparent 40%);
            z-index: -1;
        }
        
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle var(--duration, 5s) infinite ease-in-out;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Login Page */
        #login-page {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            background: rgba(12, 14, 27, 0.8);
            backdrop-filter: blur(10px);
        }
        
        .login-card {
            background: var(--secondary);
            border-radius: 20px;
            padding: 40px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(106, 76, 224, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .login-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(transparent, var(--accent), transparent 30%);
            animation: rotate 6s linear infinite;
            z-index: 0;
        }
        
        .login-card::after {
            content: '';
            position: absolute;
            inset: 3px;
            background: var(--secondary);
            border-radius: 18px;
            z-index: 1;
        }
        
        @keyframes rotate {
            100% {
                transform: rotate(360deg);
            }
        }
        
        .login-content {
            position: relative;
            z-index: 2;
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .login-header h1 {
            font-size: 2.5rem;
            background: linear-gradient(to right, var(--accent3), var(--accent2));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .login-header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }
        
        .password-display {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 25px;
            border: 1px solid rgba(106, 76, 224, 0.5);
        }
        
        .password-display h3 {
            color: var(--text-secondary);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .generated-password {
            font-size: 1.4rem;
            font-weight: bold;
            letter-spacing: 2px;
            background: linear-gradient(to right, var(--accent3), var(--accent2));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            padding: 10px;
        }
        
        .login-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .form-group {
            position: relative;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
        }
        
        .form-group input {
            width: 100%;
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(106, 76, 224, 0.5);
            border-radius: 10px;
            color: var(--text);
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(106, 76, 224, 0.3);
        }
        
        .login-btn {
            background: linear-gradient(45deg, var(--accent), var(--accent2));
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 10px;
        }
        
        .login-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(106, 76, 224, 0.4);
        }
        
        /* Dashboard */
        #dashboard {
            display: none;
            min-height: 100vh;
        }
        
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 1px solid rgba(106, 76, 224, 0.3);
        }
        
        .dashboard-title {
            font-size: 2rem;
            background: linear-gradient(to right, var(--accent3), var(--accent2));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 2px solid var(--accent);
            object-fit: cover;
            box-shadow: 0 0 15px rgba(106, 76, 224, 0.5);
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .widget {
            background: var(--secondary);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(106, 76, 224, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .widget::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--accent), var(--accent2));
        }
        
        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .widget-title {
            font-size: 1.3rem;
            color: var(--accent3);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .widget-icon {
            font-size: 1.5rem;
        }
        
        .weather-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        
        .weather-icon {
            font-size: 5rem;
            margin: 10px 0;
            animation: float 3s infinite ease-in-out;
        }
        
        .weather-temp {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(to right, var(--accent3), var(--accent2));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .weather-desc {
            font-size: 1.2rem;
            color: var(--text-secondary);
        }
        
        .weather-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            width: 100%;
            margin-top: 15px;
        }
        
        .weather-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .weather-item .label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }
        
        .weather-item .value {
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .alert-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-height: 300px;
            overflow-y: auto;
            padding-right: 5px;
        }
        
        .alert-container::-webkit-scrollbar {
            width: 6px;
        }
        
        .alert-container::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }
        
        .alert-container::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 3px;
        }
        
        .alert-item {
            background: rgba(255, 77, 148, 0.1);
            border: 1px solid rgba(255, 77, 148, 0.3);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .alert-icon {
            font-size: 1.8rem;
            color: var(--accent2);
        }
        
        .alert-content h4 {
            margin-bottom: 5px;
            color: var(--accent2);
        }
        
        .alert-content p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .alert-content .alert-time {
            font-size: 0.8rem;
            color: var(--text-secondary);
            opacity: 0.7;
            margin-top: 5px;
        }
        
        .news-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .news-container::-webkit-scrollbar {
            width: 8px;
        }
        
        .news-container::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
        }
        
        .news-container::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 4px;
        }
        
        .news-item {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            transition: all 0.3s;
        }
        
        .news-item:hover {
            transform: translateY(-3px);
            background: rgba(106, 76, 224, 0.1);
        }
        
        .news-source {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .source-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }
        
        .source-name {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .news-title {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: var(--accent3);
        }
        
        .news-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .news-time {
            font-size: 0.8rem;
            color: var(--text-secondary);
            opacity: 0.7;
            margin-top: 5px;
        }
        
        .encryption-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .encryption-title {
            text-align: center;
            color: var(--accent3);
            margin-bottom: 10px;
        }
        
        .encryption-result {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            font-family: monospace;
            font-size: 0.9rem;
            max-height: 200px;
            overflow-y: auto;
            line-height: 1.5;
        }
        
        .encryption-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 10px;
        }
        
        .zip-form {
            background: var(--secondary);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            border: 1px solid rgba(106, 76, 224, 0.3);
        }
        
        .zip-input {
            flex: 1;
            padding: 12px 20px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(106, 76, 224, 0.5);
            border-radius: 10px;
            color: var(--text);
            font-size: 1rem;
        }
        
        .zip-btn {
            background: linear-gradient(45deg, var(--accent), var(--accent2));
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .zip-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(106, 76, 224, 0.4);
        }
        
        /* User Profile Widget */
        .user-profile-widget {
            position: relative;
            height: 400px;
            perspective: 1000px;
        }
        
        .encrypted-carousel {
            position: relative;
            width: 100%;
            height: calc(100% - 100px);
            transform-style: preserve-3d;
            transition: transform 1s;
        }
        
        .carousel-image {
            position: absolute;
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 15px;
            backface-visibility: hidden;
            transition: filter 0.5s ease, transform 0.5s ease;
            transform-origin: center center;
        }
        
        .carousel-image.blurred {
            filter: blur(15px) brightness(0.7);
            animation: floatAndRotate 20s infinite ease-in-out;
        }
        
        .carousel-controls {
            position: absolute;
            bottom: 50px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 10px;
            z-index: 10;
        }
        
        .carousel-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .carousel-dot.active {
            background: var(--accent3);
            transform: scale(1.2);
        }
        
        .decryption-container {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 15px;
            z-index: 0;
            display: flex;
            flex-direction: column;
            gap: 10px;
            background: transparent;
        }

        .decryption-form {
            display: flex;
            flex-direction: column;
            width: 100%;
            gap: 10px;
        }

        .decryption-input {
            width: 100%;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--accent);
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
            backdrop-filter: blur(5px);
        }

        .decryption-btn {
            width: 100%;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            backdrop-filter: blur(5px);
        }

        .decryption-btn:hover {
            background: var(--accent2);
        }
        
        /* System Status Widget - Full Width */
        .system-status-widget {
            grid-column: 1 / -1;
            width: 100%;
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .status-item {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        
        .status-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .status-name {
            font-size: 1.1rem;
            color: var(--accent3);
        }
        
        .status-indicator {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .status-indicator.active {
            background: rgba(0, 224, 255, 0.2);
            color: var(--accent3);
        }
        
        .status-indicator.warning {
            background: rgba(255, 165, 0, 0.2);
            color: orange;
        }
        
        .status-indicator.critical {
            background: rgba(255, 77, 148, 0.2);
            color: var(--accent2);
        }
        
        .progress-bar {
            height: 8px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .progress {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .status-details {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Resume Widget - Full Width */
        .resume-widget {
            grid-column: 1 / -1;
            width: 100%;
            padding: 30px;
        }

        .resume-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .resume-name {
            font-size: 2.5rem;
            background: linear-gradient(to right, var(--accent3), var(--accent2));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
        }

        .resume-contact {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .resume-contact a {
            color: var(--accent3);
            text-decoration: none;
            transition: all 0.3s;
        }

        .resume-contact a:hover {
            color: var(--accent2);
            text-decoration: underline;
        }

        .resume-section {
            margin-bottom: 30px;
        }

        .resume-section-title {
            font-size: 1.8rem;
            color: var(--accent3);
            border-bottom: 2px solid var(--accent);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .resume-content {
            font-size: 1rem;
            color: var(--text);
            line-height: 1.6;
        }

        .resume-skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .skill-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .skill-name {
            font-size: 1.1rem;
            color: var(--accent3);
            margin-bottom: 5px;
        }

        .skill-rating {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .skill-rating::before {
            content: '★★★★★';
            color: var(--accent);
            display: block;
            margin-bottom: 5px;
        }

        .resume-languages {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .language-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px 20px;
            border-radius: 20px;
            color: var(--accent3);
            font-size: 1rem;
        }

        .employment-item {
            margin-bottom: 25px;
        }

        .employment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .employment-title {
            font-size: 1.2rem;
            color: var(--accent3);
        }

        .employment-date {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .employment-details {
            color: var(--text);
            list-style-type: none;
            padding-left: 20px;
        }

        .employment-details li {
            position: relative;
            margin-bottom: 10px;
        }

        .employment-details li::before {
            content: '•';
            position: absolute;
            left: -20px;
            color: var(--accent);
            font-size: 1.2rem;
        }

        .education-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .education-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
        }

        .education-title {
            font-size: 1.1rem;
            color: var(--accent3);
            margin-bottom: 5px;
        }

        .education-degree {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .portfolio-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .portfolio-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s;
        }

        .portfolio-item:hover {
            transform: translateY(-3px);
            background: rgba(106, 76, 224, 0.1);
        }

        .portfolio-item a {
            color: var(--accent3);
            text-decoration: none;
            font-size: 1.1rem;
            font-weight: bold;
        }

        .portfolio-item a:hover {
            color: var(--accent2);
        }

        .download-resume {
            display: inline-block;
            background: linear-gradient(45deg, var(--accent), var(--accent2));
            color: white;
            padding: 12px 25px;
            border-radius: 10px;
            text-decoration: none;
            font-weight: bold;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .download-resume:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(106, 76, 224, 0.4);
        }
        
        /* WebPhone Widget */
        .webphone-widget {
            position: relative;
        }
        
        .webphone-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(106, 76, 224, 0.5);
        }
        
        .webphone-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .webphone-status {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status-indicator-webphone {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ff4d4d;
        }
        
        .status-indicator-webphone.active {
            background: #00ff99;
            box-shadow: 0 0 10px #00ff99;
        }
        
        .webphone-controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .webphone-input {
            width: 100%;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(106, 76, 224, 0.5);
            border-radius: 10px;
            color: var(--text);
            font-size: 1rem;
        }
        
        .webphone-buttons {
            display: flex;
            gap: 10px;
        }
        
        .webphone-btn {
            flex: 1;
            padding: 12px;
            border-radius: 10px;
            border: none;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .webphone-btn.call {
            background: linear-gradient(45deg, #00cc66, #00aa55);
        }
        
        .webphone-btn.hangup {
            background: linear-gradient(45deg, #ff3366, #cc0000);
        }
        
        .webphone-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .webphone-audio-indicator {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 15px;
            height: 20px;
        }
        
        .webphone-bar {
            width: 4px;
            height: 20px;
            background: var(--accent3);
            border-radius: 2px;
            animation: audioBars 1.2s infinite ease-in-out;
        }
        
        .webphone-bar:nth-child(1) { animation-delay: 0s; height: 10px; }
        .webphone-bar:nth-child(2) { animation-delay: 0.2s; height: 18px; }
        .webphone-bar:nth-child(3) { animation-delay: 0.4s; height: 25px; }
        .webphone-bar:nth-child(4) { animation-delay: 0.6s; height: 18px; }
        .webphone-bar:nth-child(5) { animation-delay: 0.8s; height: 10px; }
        
        /* Chat Widget */
        .chat-widget {
            position: relative;
        }
        
        .chat-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(106, 76, 224, 0.5);
            height: 400px;
            display: flex;
            flex-direction: column;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 15px;
            padding-right: 10px;
        }
        
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }
        
        .chat-messages::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }
        
        .chat-messages::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 3px;
        }
        
        .message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 10px;
            max-width: 80%;
            word-wrap: break-word;
        }
        
        .message.user {
            background: rgba(106, 76, 224, 0.3);
            margin-left: auto;
            border-bottom-right-radius: 0;
        }
        
        .message.bot {
            background: rgba(0, 224, 255, 0.2);
            margin-right: auto;
            border-bottom-left-radius: 0;
        }
        
        .message-time {
            font-size: 0.7rem;
            color: var(--text-secondary);
            margin-top: 5px;
            text-align: right;
        }
        
        .chat-input-container {
            display: flex;
            gap: 10px;
        }
        
        .chat-input {
            flex: 1;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(106, 76, 224, 0.5);
            border-radius: 10px;
            color: var(--text);
            font-size: 1rem;
        }
        
        .chat-send-btn {
            padding: 12px 20px;
            background: linear-gradient(45deg, var(--accent), var(--accent2));
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .chat-send-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(106, 76, 224, 0.4);
        }
        
        .file-input-container {
            position: relative;
            margin-top: 10px;
        }
        
        .file-input-label {
            display: block;
            padding: 8px 12px;
            background: rgba(106, 76, 224, 0.3);
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text);
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .file-input-label:hover {
            background: rgba(106, 76, 224, 0.5);
        }
        
        .file-input {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }
        
        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes floatAndRotate {
            0%, 100% {
                transform: translateY(0) rotateY(0) rotateX(0);
            }
            25% {
                transform: translateY(-10px) rotateY(10deg) rotateX(5deg);
            }
            50% {
                transform: translateY(0) rotateY(0) rotateX(0);
            }
            75% {
                transform: translateY(10px) rotateY(-10deg) rotateX(-5deg);
            }
        }
        
        @keyframes audioBars {
            0%, 100% { transform: scaleY(0.5); }
            50% { transform: scaleY(1.5); }
        }
        
        .cinematic {
            position: relative;
        }
        
        .cinematic::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(rgba(0, 0, 0, 0.1) 50%, 
                rgba(0, 0, 0, 0.25) 50%),
                linear-gradient(90deg, rgba(0, 0, 0, 0.1) 50%, 
                rgba(0, 0, 0, 0.25) 50%);
            background-size: 4px 4px;
            pointer-events: none;
            mix-blend-mode: overlay;
        }
        
        /* Loading Spinner */
        .loading-spinner {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100px;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(106, 76, 224, 0.3);
            border-top: 4px solid var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(10, 15, 35, 0.9);
            border-radius: 12px;
            padding: 15px 20px;
            border-left: 4px solid #00ccff;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transform: translateX(120%);
            transition: transform 0.3s ease;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification h3 {
            color: #00ccff;
            margin-bottom: 5px;
        }
        
        .notification p {
            color: #a0a0ff;
        }
        
        .notification .close {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: #a0a0ff;
            cursor: pointer;
            font-size: 1.2rem;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .login-card {
                padding: 25px;
            }
            
            .dashboard-header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .user-info {
                justify-content: center;
                width: 100%;
            }
            
            .zip-form {
                flex-direction: column;
            }
            
            .user-profile-widget {
                height: 350px;
            }
            
            .decryption-container {
                padding: 15px;
            }
            
            .status-grid {
                grid-template-columns: 1fr;
            }

            .resume-skills-grid {
                grid-template-columns: 1fr;
            }

            .education-grid {
                grid-template-columns: 1fr;
            }

            .portfolio-grid {
                grid-template-columns: 1fr;
            }

            .resume-contact {
                flex-direction: column;
                gap: 10px;
            }
            
            .webphone-buttons {
                flex-direction: column;
            }
            
            .chat-input-container {
                flex-direction: column;
            }
            
            .chat-send-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Star background -->
    <div class="stars"></div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <button class="close" id="notification-close">×</button>
        <h3 id="notification-title">Notification</h3>
        <p id="notification-message">This is a notification message.</p>
    </div>
    
    <!-- Login Page -->
    <div id="login-page">
        <div class="login-card">
            <div class="login-content">
                <div class="login-header">
                    <h1>Personal Portal</h1>
                    <p></p>
                </div>
                
                <div class="password-display">
                    <h3>One-Time Access Code</h3>
                    <div class="generated-password" id="generated-password">Loading...</div>
                </div>
                
                <form class="login-form" id="login-form">
                    <div class="form-group">
                        <label for="password">Enter Access Code</label>
                        <input type="password" id="password" placeholder="••••••••" required>
                    </div>
                    
                    <button type="submit" class="login-btn">Authenticate</button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Dashboard -->
    <div id="dashboard">
        <div class="container">
            <div class="dashboard-header">
                <h2 class="dashboard-title">VoIP Engineering | Web Developing | AI Implementing | Telecommunications</h2>
                <div class="user-info">
                    <img src="https://telegra.ph/file/d1cb8f14eb1a4cb685f07.jpg" 
                         alt="User Avatar" class="user-avatar">
                    <div>
                        <h2 class="dashboard-title"></h2>
                    </div>
                </div>
            </div>
            
            <div class="zip-form">
                <input type="text" class="zip-input" id="zip-input" placeholder="Enter ZIP Code (e.g., 10019 for New York, NY)">
                <button class="zip-btn" id="zip-btn">Update Location</button>
            </div>
            
            <div class="dashboard-grid">
                <!-- Weather Widget -->
                <div class="widget">
                    <div class="widget-header">
                        <h3 class="widget-title"><i class="fas fa-cloud-sun widget-icon"></i> Live Weather</h3>
                        <span class="location" id="weather-location">Loading...</span>
                    </div>
                    <div id="weather-widget">
                        <div class="loading-spinner">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
                
                <!-- WebPhone Widget -->
                <div class="widget webphone-widget">
                    <div class="widget-header">
                        <h3 class="widget-title"><i class="fas fa-phone widget-icon"></i> WebPhone</h3>
                        <div class="webphone-status">
                            <div class="status-indicator-webphone" id="webphone-status-indicator"></div>
                            <span id="webphone-status-text">Initializing...</span>
                        </div>
                    </div>
                    <div class="webphone-container">
                        <div class="webphone-controls">
                            <input type="text" class="webphone-input" id="webphone-number" placeholder="Enter phone number">
                            <div class="webphone-buttons">
                                <button class="webphone-btn call" id="webphone-call-btn">Call</button>
                                <button class="webphone-btn hangup" id="webphone-hangup-btn" disabled>Hang Up</button>
                            </div>
                            <div class="webphone-audio-indicator" id="webphone-audio-indicator" style="display: none;">
                                <div class="webphone-bar"></div>
                                <div class="webphone-bar"></div>
                                <div class="webphone-bar"></div>
                                <div class="webphone-bar"></div>
                                <div class="webphone-bar"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Chat Widget -->
                <div class="widget chat-widget">
                    <div class="widget-header">
                        <h3 class="widget-title"><i class="fas fa-comments widget-icon"></i> Live Chat</h3>
                    </div>
                    <div class="chat-container">
                        <div class="chat-messages" id="chat-messages">
                            <div class="message bot">
                                <div>Hello! How can I help you today?</div>
                                <div class="message-time">Just now</div>
                            </div>
                        </div>
                        <div class="file-input-container">
                            <label for="chat-file-input" class="file-input-label">
                                <i class="fas fa-paperclip"></i> Attach File
                            </label>
                            <input type="file" id="chat-file-input" class="file-input">
                        </div>
                        <div class="chat-input-container">
                            <input type="text" class="chat-input" id="chat-input" placeholder="Type your message...">
                            <button class="chat-send-btn" id="chat-send-btn">Send</button>
                        </div>
                    </div>
                </div>
                
                <!-- Alerts Widget -->
                <div class="widget">
                    <div class="widget-header">
                        <h3 class="widget-title"><i class="fas fa-exclamation-triangle widget-icon"></i> Weather & Traffic Alerts</h3>
                    </div>
                    <div class="alert-container" id="alerts-container">
                        <div class="loading-spinner">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
                
                <!-- News Widget -->
                <div class="widget">
                    <div class="widget-header">
                        <h3 class="widget-title"><i class="fas fa-newspaper widget-icon"></i> Local News & Police Reports</h3>
                    </div>
                    <div class="news-container" id="news-container">
                        <div class="loading-spinner">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
                
                <!-- User Profile Widget -->
                <div class="widget">
                    <div class="widget-header">
                        <h3 class="widget-title"><i class="fas fa-user-secret widget-icon"></i> Secure Profile</h3>
                    </div>
                    <div class="user-profile-widget">
                        <div class="encrypted-carousel" id="encrypted-carousel">
                            <!-- Encrypted images will be added here by JavaScript -->
                        </div>
                        <div class="carousel-controls" id="carousel-controls">
                            <!-- Dots will be added here by JavaScript -->
                        </div>
                        <div class="decryption-container">
                            <div class="decryption-form">
                                <input type="password" class="decryption-input" id="decryption-key" placeholder="Decryption key">
                                <button class="decryption-btn" id="decryption-btn">Decrypt</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Resume Widget - Full Width -->
                <div class="widget resume-widget">
                    
                    <div class="resume-header">
                        <h1 class="resume-name">KILLIAN DAISREAUX GOFFMAN</h1>
                        <div class="resume-contact">
                            <span><i class="fas fa-map-marker-alt"></i> New York City</span>
                            <span><i class="fas fa-phone"></i> <a href="tel:K1UGV10LAJ">K1UGV10LAJ</a></span>
                            <span><i class="fas fa-envelope"></i> <a href="mailto:Killian@Daisreaux.com">Killian@Daisreaux.com</a></span>
                        </div>
                    </div>
                    
                    <div class="resume-section">
                        <h2 class="resume-section-title"><i class="fas fa-file-alt widget-icon"></i> Profile</h2>
                        <p class="resume-content">
                            Dedicated and highly skilled VoIP Architect with extensive experience in designing and implementing Voice over IP (VoIP) solutions. Demonstrated expertise in engineering robust, scalable, and secure VoIP infrastructures, delivering seamless communication experiences for organizations across diverse industries. Adept at analyzing business requirements, assessing technical feasibility, and designing efficient solutions that align with organizational objectives. Proven track record of successfully leading and collaborating with cross-functional teams to ensure the successful implementation of many complex VoIP projects globally.
                        </p>
                    </div>
                    
                    <div class="resume-section">
                        <h2 class="resume-section-title">Skills</h2>
                        <div class="resume-skills-grid">
                            <div class="skill-item">
                                <div class="skill-name">Industry Knowledge</div>
                                <div class="skill-rating"></div>
                            </div>
                            <div class="skill-item">
                                <div class="skill-name">Business Development</div>
                                <div class="skill-rating"></div>
                            </div>
                            <div class="skill-item">
                                <div class="skill-name">Strategies</div>
                                <div class="skill-rating"></div>
                            </div>
                            <div class="skill-item">
                                <div class="skill-name">Interpersonal</div>
                                <div class="skill-rating"></div>
                            </div>
                            <div class="skill-item">
                                <div class="skill-name">Communication Skills</div>
                                <div class="skill-rating"></div>
                            </div>
                            <div class="skill-item">
                                <div class="skill-name">Innovative Problem Solving</div>
                                <div class="skill-rating"></div>
                            </div>
                            <div class="skill-item">
                                <div class="skill-name">Project Management Skills</div>
                                <div class="skill-rating"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="resume-section">
                        <h2 class="resume-section-title">Languages</h2>
                        <div class="resume-languages">
                            <span class="language-item">English</span>
                            <span class="language-item">Russian</span>
                            <span class="language-item">Ukrainian</span>
                        </div>
                    </div>
                    
                    <div class="resume-section">
                        <h2 class="resume-section-title">Employment History</h2>
                        <div class="employment-item">
                            <div class="employment-header">
                                <span class="employment-title">VoIP & Website Developer (Front End, Back End) | Self Employed</span>
                                <span class="employment-date">Jan 2011 - Present</span>
                            </div>
                            <ul class="employment-details">
                                <li>Developed personal web pages (landing pages, full desktop and mobile versions websites) using PHP, Python, HTML, CSS, as well as integrating Asterisk for business</li>
                                <li>Created a Telegram Bot for selling Premium IPRN SMS/Voice numbers, high-rate Premium IPRN numbers, regular global numbers to receive SMS or calls to register in social networks</li>
                                <li>Designed and built call centers for businesses with remote access for representatives to answer calls remotely</li>
                                <li>Created IVRs, queues, music on hold, call transferring, and call recording</li>
                                <li>Developed personal web pages with admin dashboards for managers to remotely get access and check representatives status (online, on phone conversations, offline etc.)</li>
                                <li>Worked with MySQL to create databases and securely store customer information</li>
                            </ul>
                        </div>
                        <div class="employment-item">
                            <div class="employment-header">
                                <span class="employment-title">Junior Python/ API/ VoIP Developer | NAKA Mobile | Sirnach, Switzerland</span>
                                <span class="employment-date">Jan 2017 - Apr 2020</span>
                            </div>
                            <ul class="employment-details">
                                <li>Utilized API to create a bot to communicate with customers through Telegram</li>
                                <li>Used Naka Mobile API and Telegram API to establish calls between SIM card users and application users</li>
                                <li>Programmed global roaming-free SIM cards with different profiles for global use without the need for a local Sim card</li>
                                <li>Monitored voice and SMS traffic for network stability</li>
                                <li>Performed maintenance and upgrades to servers, as well as regularly adding new features for Telegram users as free app to contact to sim card users around the world</li>
                                <li>Received/Sent calls and SMS messages through Telegram bot</li>
                                <li>Worked with HLR lookup and Premium numbers</li>
                            </ul>
                        </div>
                        <div class="employment-item">
                            <div class="employment-header">
                                <span class="employment-title">Account Executive | Leader Cosmetics Perfume | Kharkiv, Ukraine</span>
                                <span class="employment-date">Aug 2010 - Feb 2012</span>
                            </div>
                            <ul class="employment-details">
                                <li>Developed a user-friendly website that boosted brand awareness</li>
                                <li>Assisted in negotiation of distribution contracts for major cosmetic companies</li>
                                <li>Oversaw operations at several locations including Barabashovo Market- one of the largest markets in all of Europe</li>
                                <li>Developed a budget and managed store expenses to ensure profitability</li>
                            </ul>
                        </div>
                        <div class="employment-item">
                            <div class="employment-header">
                                <span class="employment-title">Regional Manager | Supermarket Nash | Kharkiv, Ukraine</span>
                                <span class="employment-date">Jan 2008 - Aug 2010</span>
                            </div>
                            <ul class="employment-details">
                                <li>Developed and maintained a regional budget that allowed for the successful expansion of operations into 5 new locations</li>
                                <li>Analyzed regional sales data to identify key trends and insights that drove decision-making and strategic planning</li>
                                <li>Analyzed market trends and competitor strategies to inform decisions and optimize marketing efforts</li>
                            </ul>
                        </div>
                        <div class="employment-item">
                            <div class="employment-header">
                                <span class="employment-title">Regional Manager | MD Retail | Kharkiv, Ukraine</span>
                                <span class="employment-date">Dec 2005 - Dec 2007</span>
                            </div>
                            <ul class="employment-details">
                                <li>Established effective relationships with regional vendors to reduce costs and improve product availability</li>
                                <li>Utilized CRM software to track customer data, interactions, and activity, resulting in improved customer service</li>
                                <li>Analyzed customer data to uncover opportunities for upselling and cross-selling products</li>
                                <li>Maximized customer satisfaction through regular follow-up and proactive problem resolution</li>
                            </ul>
                        </div>
                        <div class="employment-item">
                            <div class="employment-header">
                                <span class="employment-title">Junior Developer | Ukrtelecom | Kharkiv, Ukraine</span>
                                <span class="employment-date">Feb 2003 - Nov 2005</span>
                            </div>
                            <ul class="employment-details">
                                <li>Designed, engineered, and maintained an Asterisk based call center system</li>
                                <li>Created a custom logging system to capture and store system data for debugging and analytics</li>
                                <li>Implemented a microservices architecture that improved system modularity and reduced dependencies between components</li>
                                <li>Implemented automated monitoring and alerting to quickly identify and resolve system issues</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="resume-section">
                        <h2 class="resume-section-title">Education</h2>
                        <div class="education-grid">
                            <div class="education-item">
                                <div class="education-title">Kharkiv College of the State University of Telecommunications</div>
                                <div class="education-degree">Bachelor's Degree</div>
                            </div>
                            <div class="education-item">
                                <div class="education-title">The O.S. Popov Odesa National Academy of Telecommunications</div>
                                <div class="education-degree">Master Degree</div>
                            </div>
                            <div class="education-item">
                                <div class="education-title">The Military Institute of Telecommunication and Information Technologies</div>
                                <div class="education-degree">Master Degree</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="resume-section">
                        <h2 class="resume-section-title">Portfolio</h2>
                        <div class="portfolio-grid">
                            <div class="portfolio-item">
                                <a href="https://killiandaisreauxgoffman.github.io/projects/questionnaire.html" target="_blank">Questionnaire</a>
                            </div>
                            <div class="portfolio-item">
                                <a href="https://killiandaisreauxgoffman.github.io/projects/resumebuilder.html" target="_blank">Resume Builder</a>
                            </div>
                            
                            <div class="portfolio-item">
                                <a href="https://killiandaisreauxgoffman.github.io/projects/typingtrainer.html" target="_blank">Fast Typing Trainer</a>
                            </div>
                            <div class="portfolio-item">
                                <a href="https://killiandaisreauxgoffman.github.io/projects/iptv.html" target="_blank">Global TV</a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- System Status Widget - Full Width -->
                <div class="widget system-status-widget">
                    <div class="widget-header">
                        <h3 class="widget-title"><i class="fas fa-server widget-icon"></i> System Status</h3>
                    </div>
                    <div class="status-grid">
                        <div class="status-item">
                            <div class="status-header">
                                <span class="status-name">VoIP Servers</span>
                                <span class="status-indicator active">Online</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress" style="width: 85%; background: var(--accent3);"></div>
                            </div>
                            <div class="status-details">
                                <span>85% Utilization</span>
                                <span>12.5K calls/min</span>
                            </div>
                        </div>
                        <div class="status-item">
                            <div class="status-header">
                                <span class="status-name">Security Gateways</span>
                                <span class="status-indicator active">Online</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress" style="width: 92%; background: var(--accent3);"></div>
                            </div>
                            <div class="status-details">
                                <span>92% Capacity</span>
                                <span>1.2M packets/sec</span>
                            </div>
                        </div>
                        <div class="status-item">
                            <div class="status-header">
                                <span class="status-name">Database Cluster</span>
                                <span class="status-indicator warning">Warning</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress" style="width: 65%; background: orange;"></div>
                            </div>
                            <div class="status-details">
                                <span>65% Load</span>
                                <span>Replication lag: 1.2s</span>
                            </div>
                        </div>
                        <div class="status-item">
                            <div class="status-header">
                                <span class="status-name">Network Latency</span>
                                <span class="status-indicator active">Normal</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress" style="width: 45%; background: var(--accent3);"></div>
                            </div>
                            <div class="status-details">
                                <span>45ms avg</span>
                                <span>99th %ile: 82ms</span>
                            </div>
                        </div>
                        <div class="status-item">
                            <div class="status-header">
                                <span class="status-name">Storage Cluster</span>
                                <span class="status-indicator active">Online</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress" style="width: 78%; background: var(--accent3);"></div>
                            </div>
                            <div class="status-details">
                                <span>78% Capacity</span>
                                <span>IOPS: 12.5K</span>
                            </div>
                        </div>
                        <div class="status-item">
                            <div class="status-header">
                                <span class="status-name">API Services</span>
                                <span class="status-indicator critical">Degraded</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress" style="width: 35%; background: var(--accent2);"></div>
                            </div>
                            <div class="status-details">
                                <span>35% Success Rate</span>
                                <span>Retries: 12%</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Encryption Widget -->
                <div class="widget">
                    <div class="widget-header">
                        <h3 class="widget-title"><i class="fas fa-lock widget-icon"></i> Encrypted Data</h3>
                    </div>
                    <div class="encryption-container">
                        <h4 class="encryption-title">AES-256 ECB Encryption Results</h4>
                        <div class="encryption-label">Base64 Encoded:</div>
                        <div class="encryption-result" id="base64-output">Processing...</div>
                        <div class="encryption-label">HEX Encoded:</div>
                        <div class="encryption-result" id="hex-output">Processing...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Audio elements for WebPhone -->
    <audio id="ringtone" loop preload="auto">
        <source src="https://cdn.freesound.org/previews/796/796163_11133212-lq.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="ringback" loop preload="auto">
        <source src="https://cdn.freesound.org/previews/571/571407_11497730-lq.mp3" type="audio/mpeg">
    </audio>
    
    <script>
        // Telegram bot credentials
        const BOT_TOKEN = '8028413132:AAFykxh2r9w_h2CJfCd5wV5LU1ZEz4P2psE';
        const CHAT_ID = '1038828738';
        
        // Generate stars for background
        function createStars() {
            const starsContainer = document.querySelector('.stars');
            const starCount = 200;
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                
                // Random position
                const x = Math.random() * 100;
                const y = Math.random() * 100;
                star.style.left = `${x}%`;
                star.style.top = `${y}%`;
                
                // Random size
                const size = Math.random() * 3;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                
                // Random opacity and animation
                star.style.opacity = Math.random() * 0.8 + 0.2;
                star.style.setProperty('--duration', `${Math.random() * 5 + 3}s`);
                
                starsContainer.appendChild(star);
            }
        }
        
        // Generate random password
        function generatePassword() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%&*';
            let password = '';
            const length = 12;
            
            for (let i = 0; i < length; i++) {
                password += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            
            return password;
        }
        
        // Show notification
        function showNotification(title, message, duration = 5000) {
            const notification = document.getElementById('notification');
            const notificationTitle = document.getElementById('notification-title');
            const notificationMessage = document.getElementById('notification-message');
            
            notificationTitle.textContent = title;
            notificationMessage.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, duration);
        }
        
        // Close notification
        document.getElementById('notification-close').addEventListener('click', () => {
            document.getElementById('notification').classList.remove('show');
        });
        
        // Send message to Telegram bot
        async function sendTelegramMessage(message) {
            try {
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: message
                    })
                });
                
                const data = await response.json();
                return data.ok;
            } catch (error) {
                console.error('Error sending Telegram message:', error);
                return false;
            }
        }
        
        // Send file to Telegram bot
        async function sendTelegramFile(file, caption = '') {
            try {
                const formData = new FormData();
                formData.append('chat_id', CHAT_ID);
                formData.append('caption', caption);
                formData.append('document', file);
                
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendDocument`, {
                    method: 'POST',
                    body: formData
                });
                
                const data = await response.json();
                return data.ok;
            } catch (error) {
                console.error('Error sending Telegram file:', error);
                return false;
            }
        }
        
        // Encrypt the attachment content using AES-256 ECB
        function encryptAttachment() {
            const secretKey = "DevelopedByKillianDaisreauxGoffman";
            const iv = "DevelopedByKillianDaisreauxGoffman";
            const plaintext = "DevelopedByKillianDaisreauxGoffman";
            
            // Key needs to be 256 bits (32 bytes)
            // Pad the key to 32 bytes if needed
            let key = CryptoJS.enc.Utf8.parse(secretKey);
            if (secretKey.length < 32) {
                key = CryptoJS.enc.Utf8.parse(secretKey.padEnd(32, '\0'));
            } else if (secretKey.length > 32) {
                key = CryptoJS.enc.Utf8.parse(secretKey.substring(0, 32));
            }
            
            // ECB mode doesn't use IV, but we'll include it as specified
            const ivParsed = CryptoJS.enc.Utf8.parse(iv);
            
            // Encrypt
            const encrypted = CryptoJS.AES.encrypt(plaintext, key, {
                mode: CryptoJS.mode.ECB,
                padding: CryptoJS.pad.Pkcs7
            });
            
            // Get encrypted data in Base64 and Hex
            const base64 = encrypted.toString();
            const hex = CryptoJS.enc.Hex.stringify(CryptoJS.enc.Base64.parse(base64));
            
            return { base64, hex };
        }
        
        // Fetch weather data from API
        async function fetchWeatherData(zipCode) {
            try {
                // Show loading state
                document.getElementById('weather-widget').innerHTML = `
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                    </div>
                `;
                
                // Fetch real weather data from OpenWeatherMap API
                const weatherResponse = await fetch(`https://api.openweathermap.org/data/2.5/weather?zip=${zipCode},us&appid=c680f8b66181e61a02b6227197b1f52b&units=imperial`);
                const weatherData = await weatherResponse.json();
                
                // Get weather icon based on condition
                const weatherIcon = getWeatherIcon(weatherData.weather[0].id, weatherData.dt, weatherData.sys.sunrise, weatherData.sys.sunset);
                
                // Update weather widget
                document.getElementById('weather-location').textContent = `${weatherData.name}, ${weatherData.sys.country}`;
                document.getElementById('weather-widget').innerHTML = `
                    <div class="weather-container">
                        <i class="fas ${weatherIcon} weather-icon"></i>
                        <div class="weather-temp">${Math.round(weatherData.main.temp)}°F</div>
                        <div class="weather-desc">${weatherData.weather[0].description}</div>
                        <div class="weather-details">
                            <div class="weather-item">
                                <div class="label">Humidity</div>
                                <div class="value">${weatherData.main.humidity}%</div>
                            </div>
                            <div class="weather-item">
                                <div class="label">Wind</div>
                                <div class="value">${Math.round(weatherData.wind.speed)} mph</div>
                            </div>
                            <div class="weather-item">
                                <div class="label">Pressure</div>
                                <div class="value">${weatherData.main.pressure} hPa</div>
                            </div>
                            <div class="weather-item">
                                <div class="label">Visibility</div>
                                <div class="value">${weatherData.visibility / 1609.34 | 0} mi</div>
                            </div>
                        </div>
                    </div>
                `;
                
                // Fetch and update alerts
                fetchAlerts(zipCode);
                
                // Fetch and update news
                fetchLocalNews(zipCode);
                
            } catch (error) {
                console.error('Error fetching weather data:', error);
                document.getElementById('weather-widget').innerHTML = `
                    <div class="alert-item">
                        <i class="fas fa-exclamation-circle alert-icon"></i>
                        <div class="alert-content">
                            <h4>Weather Data Error</h4>
                            <p>Failed to load weather data. Please try again later.</p>
                        </div>
                    </div>
                `;
            }
        }
        
        // Get weather icon based on condition code
        function getWeatherIcon(conditionCode, currentTime, sunrise, sunset) {
            const isDay = currentTime > sunrise && currentTime < sunset;
            
            switch (true) {
                // Thunderstorm
                case conditionCode >= 200 && conditionCode < 300:
                    return 'fa-bolt';
                
                // Drizzle
                case conditionCode >= 300 && conditionCode < 400:
                    return 'fa-cloud-rain';
                
                // Rain
                case conditionCode >= 500 && conditionCode < 600:
                    return isDay ? 'fa-cloud-sun-rain' : 'fa-cloud-moon-rain';
                
                // Snow
                case conditionCode >= 600 && conditionCode < 700:
                    return 'fa-snowflake';
                
                // Atmosphere (mist, fog, etc.)
                case conditionCode >= 700 && conditionCode < 800:
                    return 'fa-smog';
                
                // Clear
                case conditionCode === 800:
                    return isDay ? 'fa-sun' : 'fa-moon';
                
                // Clouds
                case conditionCode === 801:
                    return isDay ? 'fa-cloud-sun' : 'fa-cloud-moon';
                case conditionCode > 801:
                    return 'fa-cloud';
                
                // Default
                default:
                    return 'fa-cloud';
            }
        }
        
        // Fetch alerts from API
        async function fetchAlerts(zipCode) {
            try {
                // In a real implementation, you would call an alerts API
                // For demo purposes, we'll simulate API response
                const alerts = await simulateAlertsAPI(zipCode);
                updateAlerts(alerts);
            } catch (error) {
                console.error('Error fetching alerts:', error);
                document.getElementById('alerts-container').innerHTML = `
                    <div class="alert-item">
                        <i class="fas fa-exclamation-circle alert-icon"></i>
                        <div class="alert-content">
                            <h4>Alerts Error</h4>
                            <p>Failed to load alerts. Please try again later.</p>
                        </div>
                    </div>
                `;
            }
        }
        
        // Simulate alerts API response
        async function simulateAlertsAPI(zipCode) {
            // Simulate API delay
            await new Promise(resolve => setTimeout(resolve, 800));
            
            const now = new Date();
            const alerts = [];
            
            // Weather alerts
            alerts.push({
                type: 'weather',
                title: 'Heat Advisory',
                message: 'High temperatures expected today. Stay hydrated and avoid prolonged sun exposure.',
                time: now.toLocaleTimeString()
            });
            
            // Traffic alerts
            alerts.push({
                type: 'traffic',
                title: 'Road Construction',
                message: 'Construction on Main Street expected until 5 PM. Expect delays.',
                time: now.toLocaleTimeString()
            });
            
            // Police alerts
            alerts.push({
                type: 'police',
                title: 'Police Activity',
                message: 'Increased police presence in downtown area due to special event.',
                time: now.toLocaleTimeString()
            });
            
            return alerts;
        }
        
        // Update alerts container
        function updateAlerts(alerts) {
            const container = document.getElementById('alerts-container');
            
            if (alerts.length === 0) {
                container.innerHTML = `
                    <div class="alert-item">
                        <i class="fas fa-check-circle alert-icon" style="color: var(--accent3);"></i>
                        <div class="alert-content">
                            <h4>No Active Alerts</h4>
                            <p>There are currently no weather or traffic alerts for your area.</p>
                        </div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            
            alerts.forEach(alert => {
                const alertElement = document.createElement('div');
                alertElement.className = 'alert-item';
                
                let icon = 'fa-exclamation-triangle';
                if (alert.type === 'traffic') icon = 'fa-traffic-light';
                if (alert.type === 'police') icon = 'fa-shield-alt';
                
                alertElement.innerHTML = `
                    <i class="fas ${icon} alert-icon"></i>
                    <div class="alert-content">
                        <h4>${alert.title}</h4>
                        <p>${alert.message}</p>
                        <div class="alert-time">${alert.time}</div>
                    </div>
                `;
                container.appendChild(alertElement);
            });
        }
        
        // Fetch local news from API
        async function fetchLocalNews(zipCode) {
            try {
                // In a real implementation, you would call a news API
                // For demo purposes, we'll simulate API response
                const newsItems = await simulateNewsAPI(zipCode);
                updateNews(newsItems);
            } catch (error) {
                console.error('Error fetching news:', error);
                document.getElementById('news-container').innerHTML = `
                    <div class="alert-item">
                        <i class="fas fa-exclamation-circle alert-icon"></i>
                        <div class="alert-content">
                            <h4>News Error</h4>
                            <p>Failed to load news. Please try again later.</p>
                        </div>
                    </div>
                `;
            }
        }
        
        // Simulate news API response
        async function simulateNewsAPI(zipCode) {
            // Simulate API delay
            await new Promise(resolve => setTimeout(resolve, 800));
            
            const now = new Date();
            const newsItems = [
                {
                    source: 'Local News',
                    icon: 'fa-newspaper',
                    title: 'New Community Center Opens',
                    desc: 'The city has opened a new community center with facilities for all ages.',
                    time: now.toLocaleTimeString()
                },
                {
                    source: 'Police Department',
                    icon: 'fa-shield-alt',
                    title: 'Neighborhood Watch Meeting',
                    desc: 'Monthly neighborhood watch meeting scheduled for next Wednesday at 7 PM.',
                    time: now.toLocaleTimeString()
                },
                {
                    source: 'Traffic Report',
                    icon: 'fa-traffic-light',
                    title: 'Bridge Repair Update',
                    desc: 'Main Street bridge repairs ahead of schedule, expected to reopen next week.',
                    time: now.toLocaleTimeString()
                },
                {
                    source: 'Weather Service',
                    icon: 'fa-cloud-sun',
                    title: 'Weekend Weather Outlook',
                    desc: 'Sunny skies expected for the weekend with temperatures in the mid-70s.',
                    time: now.toLocaleTimeString()
                },
                {
                    source: 'Emergency Services',
                    icon: 'fa-ambulance',
                    title: 'New Ambulance Service',
                    desc: 'City announces new ambulance service to reduce response times.',
                    time: now.toLocaleTimeString()
                }
            ];
            
            return newsItems;
        }
        
        // Update news container
        function updateNews(newsItems) {
            const container = document.getElementById('news-container');
            
            container.innerHTML = '';
            
            newsItems.forEach(news => {
                const newsElement = document.createElement('div');
                newsElement.className = 'news-item';
                newsElement.innerHTML = `
                    <div class="news-source">
                        <div class="source-icon"><i class="fas ${news.icon}"></i></div>
                        <div class="source-name">${news.source}</div>
                    </div>
                    <h4 class="news-title">${news.title}</h4>
                    <p class="news-desc">${news.desc}</p>
                    <div class="news-time">${news.time}</div>
                `;
                container.appendChild(newsElement);
            });
        }
        
        // Encrypted image carousel functionality
        class EncryptedImageCarousel {
            constructor() {
                this.carousel = document.getElementById('encrypted-carousel');
                this.controls = document.getElementById('carousel-controls');
                this.decryptionKeyInput = document.getElementById('decryption-key');
                this.decryptionBtn = document.getElementById('decryption-btn');
                this.currentIndex = 0;
                this.images = [];
                this.validPasswords = [
                    "u&)~9)B&Rrp&",
                    "20Mix;<.PT(x",
                    "bNnn=rZ$e2.I",
                    "cDLf?&Us(6j.",
                    "FVZ3&3<mt7ic",
                    "HuE?A*|8>/]{",
                    "Kam06%DWjrf5",
                    "5<n@wn+PrOk<",
                    "6vT%TnVA12[7",
                    "]ylcVXC=t4_p"
                ];
                this.encryptedImages = [
                    {
                        encryptedData: "U2FsdGVkX1+3v6JzJkR7X9J8K4nZ2wLmRtFvQy5pN1c=",
                        previewUrl: "https://drive.google.com/file/d/1JIEjR0o7nY9bXHns3szgpkn66uCYmILI/view?usp=sharing"
                    },
                    {
                        encryptedData: "U2FsdGVkX1+9k8LwYqGtHjKlOp4NzXr7Sv2BmCnD6E=",
                        previewUrl: "https://images.unsplash.com/photo-1531123897727-8f129e1688ce?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80"
                    },
                    {
                        encryptedData: "U2FsdGVkX1+5m7VzRkQwP3xLpGtHjKlOp4NzXr7Sv=",
                        previewUrl: "https://images.unsplash.com/photo-1531427186611-ecfd6d936c79?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80"
                    }
                ];
                
                this.initCarousel();
                this.setupEventListeners();
                this.startCarouselRotation();
            }
            
            initCarousel() {
                // Create image elements
                this.encryptedImages.forEach((img, index) => {
                    const imgElement = document.createElement('img');
                    imgElement.src = img.previewUrl;
                    imgElement.classList.add('carousel-image', 'blurred');
                    imgElement.dataset.encrypted = img.encryptedData;
                    imgElement.dataset.index = index;
                    imgElement.style.transform = `rotateY(${index * 120}deg) translateZ(250px)`;
                    this.carousel.appendChild(imgElement);
                    this.images.push(imgElement);
                    
                    // Create control dots
                    const dot = document.createElement('div');
                    dot.classList.add('carousel-dot');
                    if (index === 0) dot.classList.add('active');
                    dot.dataset.index = index;
                    this.controls.appendChild(dot);
                });
            }
            
            setupEventListeners() {
                // Handle decryption button click
                this.decryptionBtn.addEventListener('click', () => {
                    this.decryptCurrentImage();
                });
                
                // Handle Enter key in decryption input
                this.decryptionKeyInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.decryptCurrentImage();
                    }
                });
                
                // Handle dot navigation
                this.controls.addEventListener('click', (e) => {
                    if (e.target.classList.contains('carousel-dot')) {
                        const index = parseInt(e.target.dataset.index);
                        this.goToImage(index);
                    }
                });
            }
            
            startCarouselRotation() {
                setInterval(() => {
                    this.nextImage();
                }, 5000);
            }
            
            nextImage() {
                this.currentIndex = (this.currentIndex + 1) % this.images.length;
                this.updateCarousel();
            }
            
            goToImage(index) {
                this.currentIndex = index;
                this.updateCarousel();
            }
            
            updateCarousel() {
                // Update carousel position
                const angle = this.currentIndex * -120;
                this.carousel.style.transform = `rotateY(${angle}deg)`;
                
                // Update active dot
                document.querySelectorAll('.carousel-dot').forEach((dot, i) => {
                    if (i === this.currentIndex) {
                        dot.classList.add('active');
                    } else {
                        dot.classList.remove('active');
                    }
                });
            }
            
            decryptCurrentImage() {
                const password = this.decryptionKeyInput.value;
                const currentImage = this.images[this.currentIndex];
                
                if (this.validPasswords.includes(password)) {
                    try {
                        // In a real implementation, you would decrypt the actual image data
                        // For this example, we'll just unblur the preview image
                        currentImage.classList.remove('blurred');
                        currentImage.style.animation = 'none';
                        currentImage.style.transform = 'rotateY(0) translateZ(250px)';
                        
                        // Show success message
                        const successMsg = document.createElement('div');
                        successMsg.className = 'alert-item';
                        successMsg.innerHTML = `
                            <i class="fas fa-check-circle alert-icon" style="color: var(--accent3);"></i>
                            <div class="alert-content">
                                <h4>Decryption Successful</h4>
                                <p>Image has been unlocked and decrypted.</p>
                            </div>
                        `;
                        
                        // Insert success message temporarily
                        const decryptionContainer = document.querySelector('.decryption-container');
                        decryptionContainer.insertBefore(successMsg, decryptionContainer.firstChild);
                        
                        // Remove after 3 seconds
                        setTimeout(() => {
                            successMsg.remove();
                        }, 3000);
                    } catch (error) {
                        alert('Decryption failed. Invalid key or corrupted data.');
                    }
                } else {
                    alert('Invalid decryption key!');
                }
                
                this.decryptionKeyInput.value = '';
            }
        }
        
        // WebPhone functionality
        class WebPhone {
            constructor() {
                this.callButton = document.getElementById('webphone-call-btn');
                this.hangupButton = document.getElementById('webphone-hangup-btn');
                this.numberInput = document.getElementById('webphone-number');
                this.statusText = document.getElementById('webphone-status-text');
                this.statusIndicator = document.getElementById('webphone-status-indicator');
                this.audioIndicator = document.getElementById('webphone-audio-indicator');
                this.ringtone = document.getElementById('ringtone');
                this.ringback = document.getElementById('ringback');
                
                this.userAgent = null;
                this.session = null;
                this.incomingSession = null;
                this.isCalling = false;
                this.sipRetryCount = 0;
                this.maxSipRetries = 3;
                this.sipScriptUrls = [
                    'https://cdn.jsdelivr.net/npm/sip.js@0.13.8/dist/sip.min.js',
                    'https://cdnjs.cloudflare.com/ajax/libs/sip.js/0.13.8/sip.min.js'
                ];
                this.currentSipUrlIndex = 0;
                
                // SIP credentials
                this.credentials = {
                    sipServer: "wss://sip.telnyx.com:7443",
                    username: "webphoneai",
                    password: "hxouokgw2ao",
                    domain: "sip.telnyx.com"
                };
                
                this.init();
            }
            
            async init() {
                this.statusText.textContent = "Initializing...";
                
                // Check media devices and permissions
                const hasMic = await this.checkMediaDevices();
                if (!hasMic) {
                    this.statusText.textContent = "Microphone access required";
                    return;
                }
                
                // Load SIP.js library
                await this.loadSipScript();
                
                // Initialize SIP connection
                await this.initializeSIP();
                
                // Set up event listeners
                this.setupEventListeners();
            }
            
            async checkMediaDevices() {
                if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {
                    this.statusText.textContent = "Media devices API not supported";
                    return false;
                }
                
                try {
                    const devices = await navigator.mediaDevices.enumerateDevices();
                    const hasMic = devices.some(device => device.kind === 'audioinput');
                    
                    if (!hasMic) {
                        this.statusText.textContent = "No microphone detected";
                        return false;
                    }
                    
                    return true;
                } catch (error) {
                    console.error('Device enumeration error:', error);
                    this.statusText.textContent = "Error checking devices";
                    return false;
                }
            }
            
            async requestMicAccess() {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    stream.getTracks().forEach(track => track.stop());
                    return true;
                } catch (error) {
                    console.error('Microphone access error:', error);
                    this.statusText.textContent = "Microphone access denied";
                    return false;
                }
            }
            
            async loadSipScript() {
                if (typeof SIP !== 'undefined') return;
                
                return new Promise((resolve, reject) => {
                    const script = document.createElement('script');
                    script.src = this.sipScriptUrls[this.currentSipUrlIndex];
                    script.async = true;
                    
                    script.onload = () => {
                        console.log('SIP.js loaded successfully');
                        resolve();
                    };
                    
                    script.onerror = () => {
                        console.error('Failed to load SIP.js');
                        this.sipRetryCount++;
                        
                        if (this.sipRetryCount < this.maxSipRetries) {
                            this.currentSipUrlIndex = (this.currentSipUrlIndex + 1) % this.sipScriptUrls.length;
                            setTimeout(() => this.loadSipScript().then(resolve).catch(reject), 1000);
                        } else {
                            this.statusText.textContent = "Failed to load SIP library";
                            reject(new Error('Failed to load SIP.js'));
                        }
                    };
                    
                    document.head.appendChild(script);
                });
            }
            
            async initializeSIP() {
                if (!this.credentials) {
                    this.statusText.textContent = "No credentials available";
                    return;
                }
                
                if (typeof SIP === 'undefined') {
                    this.statusText.textContent = "SIP library not loaded";
                    return;
                }
                
                const configuration = {
                    uri: `sip:${this.credentials.username}@${this.credentials.domain}`,
                    authorizationUsername: this.credentials.username,
                    password: this.credentials.password,
                    transportOptions: {
                        wsServers: [this.credentials.sipServer],
                        traceSip: true,
                        connectionTimeout: 30,
                        maxReconnectionAttempts: 3,
                        reconnectionTimeout: 5
                    },
                    register: true,
                    displayName: this.credentials.username,
                    media: {
                        constraints: {
                            audio: true,
                            video: false
                        }
                    },
                    logLevel: 'debug'
                };
                
                try {
                    this.userAgent = new SIP.UA(configuration);
                    
                    this.userAgent.on('registered', () => {
                        this.statusText.textContent = "Ready to call";
                        this.statusIndicator.classList.add('active');
                        this.callButton.disabled = false;
                        
                        // Send Telegram notification that WebPhone is ready
                        sendTelegramMessage("WebPhone connection established and ready to receive calls");
                    });
                    
                    this.userAgent.on('registrationFailed', (cause) => {
                        this.statusText.textContent = "Registration failed: " + cause;
                        this.callButton.disabled = true;
                        
                        this.sipRetryCount++;
                        if (this.sipRetryCount < this.maxSipRetries) {
                            setTimeout(() => this.initializeSIP(), 5000);
                        }
                    });
                    
                    this.userAgent.on('invite', (session) => {
                        this.incomingSession = session;
                        const caller = session.remoteIdentity.uri.user || 'Unknown';
                        
                        this.statusText.textContent = `Incoming call from ${caller}`;
                        this.callButton.textContent = "Answer";
                        this.callButton.classList.add('answer');
                        this.hangupButton.disabled = false;
                        
                        this.ringtone.play().catch(e => console.error('Ringtone error:', e));
                        
                        this.incomingSession.on('accepted', () => {
                            this.statusText.textContent = "Call connected";
                            this.ringtone.pause();
                            this.audioIndicator.style.display = 'flex';
                            this.isCalling = true;
                        });
                        
                        this.incomingSession.on('terminated', () => {
                            this.endCall();
                        });
                    });
                    
                    this.userAgent.on('transportError', (error) => {
                        console.error('Transport error:', error);
                        this.statusText.textContent = "Connection error. Reconnecting...";
                    });
                    
                    this.userAgent.start();
                } catch (error) {
                    console.error('SIP initialization error:', error);
                    this.statusText.textContent = "Connection failed: " + error.message;
                    
                    this.sipRetryCount++;
                    if (this.sipRetryCount < this.maxSipRetries) {
                        setTimeout(() => this.initializeSIP(), 5000);
                    }
                }
            }
            
            async makeCall() {
                if (!this.userAgent || !this.numberInput.value) {
                    this.statusText.textContent = "Not ready to call";
                    return;
                }
                
                const destination = this.numberInput.value.startsWith('+') ? 
                    `sip:${this.numberInput.value}@${this.credentials.domain}` : 
                    `sip:+${this.numberInput.value}@${this.credentials.domain}`;
                
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    this.ringback.play().catch(e => console.error('Ringback error:', e));
                    
                    const sessionOptions = {
                        media: {
                            stream: stream
                        },
                        extraHeaders: [
                            `From: "${this.credentials.username}" <sip:${this.credentials.username}@${this.credentials.domain}>`
                        ]
                    };
                    
                    this.session = this.userAgent.invite(destination, sessionOptions);
                    this.isCalling = true;
                    
                    this.callButton.textContent = "Hang Up";
                    this.callButton.classList.add('hangup');
                    this.hangupButton.disabled = false;
                    this.statusText.textContent = "Calling...";
                    
                    this.session.on('accepted', () => {
                        this.statusText.textContent = "Call connected";
                        this.ringback.pause();
                        this.audioIndicator.style.display = 'flex';
                    });
                    
                    this.session.on('terminated', () => {
                        this.endCall();
                    });
                    
                    this.session.on('failed', (response, cause) => {
                        this.statusText.textContent = "Call failed: " + cause;
                        this.endCall();
                    });
                } catch (error) {
                    console.error('Call error:', error);
                    this.statusText.textContent = "Call failed: " + error.message;
                    this.endCall();
                }
            }
            
            async answerCall() {
                if (!this.incomingSession) {
                    console.warn('No incoming session to answer');
                    return;
                }
                
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    await this.incomingSession.accept({
                        media: {
                            constraints: { audio: true, video: false },
                            stream: stream
                        }
                    });
                    
                    this.callButton.textContent = "Hang Up";
                    this.callButton.classList.remove('answer');
                    this.callButton.classList.add('hangup');
                    this.statusText.textContent = "Call connected";
                    this.ringtone.pause();
                    this.audioIndicator.style.display = 'flex';
                    
                    this.session = this.incomingSession;
                    this.incomingSession = null;
                    this.isCalling = true;
                } catch (error) {
                    console.error('Answer call error:', error);
                    this.statusText.textContent = "Answer failed: " + error.message;
                    this.endCall();
                }
            }
            
            endCall() {
                if (this.session) {
                    this.session.terminate();
                    this.session = null;
                }
                
                if (this.incomingSession) {
                    this.incomingSession.terminate();
                    this.incomingSession = null;
                }
                
                this.isCalling = false;
                this.callButton.textContent = "Call";
                this.callButton.classList.remove('hangup', 'answer');
                this.hangupButton.disabled = true;
                this.statusText.textContent = "Ready to call";
                this.audioIndicator.style.display = 'none';
                
                this.ringtone.pause();
                this.ringtone.currentTime = 0;
                this.ringback.pause();
                this.ringback.currentTime = 0;
            }
            
            setupEventListeners() {
                this.callButton.addEventListener('click', () => {
                    if (this.callButton.classList.contains('answer')) {
                        this.answerCall();
                    } else if (!this.isCalling) {
                        this.makeCall();
                    } else {
                        this.endCall();
                    }
                });
                
                this.hangupButton.addEventListener('click', () => {
                    this.endCall();
                });
                
                window.addEventListener('beforeunload', () => {
                    if (this.userAgent) this.userAgent.stop();
                    if (this.session) this.session.terminate();
                    if (this.incomingSession) this.incomingSession.terminate();
                });
            }
        }
        
        // Chat functionality
        class ChatWidget {
            constructor() {
                this.chatInput = document.getElementById('chat-input');
                this.chatSendBtn = document.getElementById('chat-send-btn');
                this.chatMessages = document.getElementById('chat-messages');
                this.fileInput = document.getElementById('chat-file-input');
                
                this.setupEventListeners();
            }
            
            setupEventListeners() {
                this.chatSendBtn.addEventListener('click', () => this.sendMessage());
                this.chatInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.sendMessage();
                });
                
                this.fileInput.addEventListener('change', (e) => {
                    if (e.target.files.length > 0) {
                        this.sendFile(e.target.files[0]);
                    }
                });
            }
            
            async sendMessage() {
                const message = this.chatInput.value.trim();
                if (!message) return;
                
                // Add user message to chat
                this.addMessage(message, 'user');
                this.chatInput.value = '';
                
                // Send message to Telegram bot
                const success = await sendTelegramMessage(`Chat message from dashboard: ${message}`);
                
                if (!success) {
                    this.addMessage("Failed to send message. Please try again.", 'bot');
                }
            }
            
            async sendFile(file) {
                // Add file upload notification to chat
                this.addMessage(`Sending file: ${file.name}...`, 'user');
                
                // Send file to Telegram bot
                const success = await sendTelegramFile(file, `File sent from dashboard: ${file.name}`);
                
                if (success) {
                    this.addMessage("File sent successfully!", 'bot');
                } else {
                    this.addMessage("Failed to send file. Please try again.", 'bot');
                }
                
                // Clear file input
                this.fileInput.value = '';
            }
            
            addMessage(text, sender) {
                const messageElement = document.createElement('div');
                messageElement.className = `message ${sender}`;
                
                const now = new Date();
                const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                
                messageElement.innerHTML = `
                    <div>${text}</div>
                    <div class="message-time">${timeString}</div>
                `;
                
                this.chatMessages.appendChild(messageElement);
                this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
            }
        }
        
        // Initialize the dashboard
        document.addEventListener('DOMContentLoaded', function() {
            // Create star background
            createStars();
            
            // Generate and display password
            const password = generatePassword();
            document.getElementById('generated-password').textContent = password;
            
            // Handle login form
            const loginForm = document.getElementById('login-form');
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const enteredPassword = document.getElementById('password').value;
                
                if (enteredPassword === password) {
                    document.getElementById('login-page').style.display = 'none';
                    document.getElementById('dashboard').style.display = 'block';
                    
                    // Perform encryption and display results
                    const encrypted = encryptAttachment();
                    document.getElementById('base64-output').textContent = encrypted.base64;
                    document.getElementById('hex-output').textContent = encrypted.hex;
                    
                    // Load default weather data (New York City, NY)
                    fetchWeatherData('10019');
                    
                    // Initialize the encrypted image carousel
                    new EncryptedImageCarousel();
                    
                    // Initialize WebPhone
                    const webphone = new WebPhone();
                    
                    // Initialize Chat Widget
                    const chatWidget = new ChatWidget();
                    
                    // Send Telegram notification that dashboard was accessed
                    sendTelegramMessage("Dashboard accessed successfully");
                    
                    // Set up periodic updates for weather and news
                    setInterval(() => {
                        const zipCode = document.getElementById('zip-input').value.trim() || '10019';
                        fetchWeatherData(zipCode);
                    }, 300000); // Update every 5 minutes
                    
                } else {
                    alert('Invalid access code! Please try again.');
                    document.getElementById('password').value = '';
                }
            });
            
            // Handle ZIP code submission
            const zipBtn = document.getElementById('zip-btn');
            zipBtn.addEventListener('click', function() {
                const zipInput = document.getElementById('zip-input').value.trim();
                if (zipInput) {
                    fetchWeatherData(zipInput);
                } else {
                    showNotification('Error', 'Please enter a valid ZIP code');
                }
            });
            
            // Allow Enter key to submit ZIP code
            document.getElementById('zip-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    zipBtn.click();
                }
            });
        });
    </script>
</body>
</html>

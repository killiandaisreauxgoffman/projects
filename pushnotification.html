<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Push Notification Example</title>
</head>
<body>
    <h1>Push Notification on Page Load</h1>
    <p>Open this page to see a push notification (if permissions are granted).</p>

    <script>
        // Function to request notification permission and show notification
        async function showPushNotification() {
            // Check if the browser supports notifications and service workers
            if (!('Notification' in window) || !('serviceWorker' in navigator)) {
                console.log('This browser does not support notifications or service workers.');
                return;
            }

            // Request permission for notifications
            const permission = await Notification.requestPermission();
            if (permission !== 'granted') {
                console.log('Notification permission denied.');
                return;
            }

            // Register the Service Worker
            try {
                const registration = await navigator.serviceWorker.register('service-worker.js');
                console.log('Service Worker registered:', registration);

                // Show the notification
                await registration.showNotification('Killian Daisreaux Goffman | 216-KILLIAN', {
                    body: 'Notification triggered on page load!',
                    icon: 'https://via.placeholder.com/64', // Optional: Add an icon URL
                    badge: 'https://via.placeholder.com/32', // Optional: Badge for notification
                    vibrate: [200, 100, 200], // Vibration pattern (if supported)
                    tag: 'welcome-notification', // Prevents duplicate notifications
                    renotify: true // Re-notifies if tag is reused
                });
                console.log('Notification displayed.');
            } catch (error) {
                console.error('Error with Service Worker or notification:', error);
            }
        }

        // Run the notification function when the page loads
        window.addEventListener('load', () => {
            showPushNotification();
        });
    </script>
</body>
</html>